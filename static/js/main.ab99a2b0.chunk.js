(this.webpackJsonpLibrary=this.webpackJsonpLibrary||[]).push([[0],{12:function(e,t,a){e.exports={book:"Book_book__rWlWm",content:"Book_content__xXGTV",image:"Book_image__30RUi",text:"Book_text__24q-X",logo:"Book_logo__1Dw6C",settingsLogo:"Book_settingsLogo__2DgB6",clearLogo:"Book_clearLogo__1Yfao"}},13:function(e,t,a){e.exports={wrapper:"Navbar_wrapper__11sKq",navbar:"Navbar_navbar__1yKoB",link:"Navbar_link__3IBGn",active:"Navbar_active__25V4-",searchWrapper:"Navbar_searchWrapper__2Negj",search:"Navbar_search__xBlJU"}},16:function(e,t,a){e.exports={textField:"TextField_textField__2WMoS",input:"TextField_input__3GgJn",isError:"TextField_isError__14ZJM",title:"TextField_title__sK0f7",error:"TextField_error__2p3-U"}},26:function(e,t,a){e.exports={buttonWrapper:"Button_buttonWrapper__3nkZv",button:"Button_button__23uxh"}},38:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(29),r=a.n(c),o=(a(38),a(3)),i=a(2),s=a(5),l=function(e,t){var a=Object(n.useState)(""),c=Object(s.a)(a,2),r=c[0],o=c[1],i=Object(n.useState)((function(){return window.localStorage.getItem(e)||t})),l=Object(s.a)(i,2),u=l[0],j=l[1];return Object(n.useEffect)((function(){try{window.localStorage.setItem(e,u)}catch(r){console.log(r.message),o(r.message)}}),[u,e]),{item:u,setItem:j,error:r}},u=a(32),j=function(){var e=l("books",[]),t=e.item,a=e.setItem,c=e.error,r=Object(n.useMemo)((function(){return function(e){if("undefined"===typeof e)return[];try{var t=JSON.parse(e);return t instanceof Array?t:[]}catch(c){return console.log(c.message),[]}}(t)}),[t]),o=function(e){var t=function(e){return JSON.stringify(e)}(e);a(t)},s=Object(n.useCallback)((function(e){var t=Object(i.a)(Object(i.a)({},e),{},{_id:Math.random().toString(36).substring(3)});o([].concat(Object(u.a)(r),[t]))}),[t]),j=Object(n.useCallback)((function(e,t){var a=r.map((function(a){return a._id===t?Object(i.a)(Object(i.a)({},a),e):a}));o(a)}),[t]),b=Object(n.useCallback)((function(e){var t=r.filter((function(t){return t._id!==e}));o(t)}),[t]);return{error:c,books:r,createBook:s,updateBook:j,deleteBook:b,findBookById:function(e){return r.find((function(t){return t._id===e}))||null}}},b=a(10),d=function(e){var t=e.initialValues,a=e.onSubmit,c=e.minLength,r=void 0===c?6:c,o=e.dynamicValidation,l=void 0===o||o,u=Object(n.useState)(t),j=Object(s.a)(u,2),d=j[0],h=j[1],O=Object(n.useState)(!1),f=Object(s.a)(O,2),x=f[0],p=f[1],v=Object(n.useState)((function(){var e={};return Object.keys(d).forEach((function(t){e[t]=""})),e})),m=Object(s.a)(v,2),g=m[0],_=m[1];return{values:d,handleChange:function(e){var t=e.target.name,a=e.target.value;if(h((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},t,a))})),x&&l){var n=a.length<r?"\u0414\u043b\u0438\u043d\u0430 \u043f\u043e\u043b\u044f ".concat(t," \u043c\u0435\u043d\u044c\u0448\u0435 ").concat(r," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):null;_((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},t,n))}))}},handleSubmit:function(e){e.preventDefault();var t=!1;x||p(!0),Object.keys(d).forEach((function(e){var a=d[e];if(void 0!==a&&a.length<r){t=!0;var n="\u0414\u043b\u0438\u043d\u0430 \u043f\u043e\u043b\u044f ".concat(e," \u043c\u0435\u043d\u044c\u0448\u0435 ").concat(r," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432");_((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(b.a)({},e,n))}))}})),t||a(d)},error:g}},h=a(6),O=a(12),f=a.n(O),x=a(0),p=function(e){var t=e.className,a=e.type,n=e.onClick;return Object(x.jsx)("svg",{tabIndex:4,onClick:function(){return n&&n()},className:t,height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:function(){switch(a){case"clear":return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(x.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})]});case"settings":return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(x.jsx)("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})]})}}()})},v=a(11),m=a.n(v),g=function(e){var t=e._id,a=e.previewImage,n=e.title,c=e.author,r=e.deleteBook;return Object(x.jsxs)("div",{className:f.a.book,children:[Object(x.jsx)("div",{className:f.a.image,children:Object(x.jsx)("img",{src:a||"https://phonoteka.org/uploads/posts/2021-04/1618912699_7-phonoteka_org-p-krasivii-fon-dlya-oblozhki-knigi-10.jpg",alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})}),Object(x.jsxs)("div",{className:f.a.content,children:[Object(x.jsxs)("div",{className:f.a.text,children:[Object(x.jsx)("span",{children:"Title"}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(x.jsx)(h.b,{tabIndex:4,to:"/?search_title=".concat(n),children:n})]}),Object(x.jsxs)("div",{className:f.a.text,children:[Object(x.jsx)("span",{children:"Author"})," \xa0\xa0",Object(x.jsx)(h.b,{tabIndex:4,to:"/?search_author=".concat(c),children:c})]})]}),Object(x.jsx)(h.b,{to:"/edit/".concat(t),children:Object(x.jsx)(p,{type:"settings",className:m()(f.a.logo,f.a.settingsLogo)})}),Object(x.jsx)(p,{onClick:function(){r(t)},type:"clear",className:m()(f.a.logo,f.a.clearLogo)})]})},_=a(31),k=a.n(_),N=function(){var e=j(),t=e.books,a=e.deleteBook,c=Object(o.g)(),r=Object(n.useMemo)((function(){var e=k.a.parse(c.search);return t.filter((function(t){if("search"in e){var a=e.search;return t.author.includes(a)||t.title.includes(a)}if("search_author"in e){var n=e.search_author;return t.author.includes(n)}if("search_title"in e){var c=e.search_title;return t.title.includes(c)}return!0}))}),[c.search,t]);return Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"books",children:t&&r.map((function(e){return Object(x.jsx)(g,Object(i.a)(Object(i.a)({},e),{},{deleteBook:a}),e._id)}))})})},w=a(15),B=a.n(w),y=a(20),C=a(33),S=a(16),I=a.n(S),F=function(e){var t=e.error,a=e.label,n=e.name,c=e.onChange,r=e.value,o=e.className,s=Object(C.a)(e,["error","label","name","onChange","value","className"]);return Object(x.jsxs)("div",Object(i.a)(Object(i.a)({},s),{},{className:m()(I.a.textField,o),children:[Object(x.jsx)("div",{className:I.a.title,children:a}),Object(x.jsx)("input",{formNoValidate:!0,className:m()(I.a.input,Object(b.a)({},I.a.isError,t)),type:"text",name:n,placeholder:a,value:r,onChange:c}),Object(x.jsx)("div",{className:I.a.error,children:t&&t})]}))},M=a(26),L=a.n(M),z=function(e){var t=e.text,a=e.className;return Object(x.jsx)("div",{className:m()(L.a.buttonWrapper,a),children:Object(x.jsx)("button",{className:L.a.button,children:t})})},E=function(e){var t=e.error,a=e.handleChange,n=e.handleSubmit,c=e.values,r=e.titlePage,o=e.buttonText,i=void 0===o?"Create":o,s=e.uploadFile;return Object(x.jsxs)("div",{className:"form",children:[Object(x.jsx)("div",{className:"titlePage",children:r}),Object(x.jsxs)("form",{onSubmit:n,children:[Object(x.jsx)(F,{name:"title",label:"Title",value:c.title,onChange:a,error:t.title}),Object(x.jsx)(F,{name:"author",label:"Author",value:c.author,onChange:a,error:t.author}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"file",name:"image-file",onChange:s})}),Object(x.jsx)(z,{text:i})]})]})},T=function(e,t){try{var a=new FileReader;e&&(a.readAsDataURL(e),a.onload=function(){var e=a.result;t(e)},a.onerror=function(e){console.log("error: ",e)})}catch(n){console.log(n.message)}},V=function(){var e=j().createBook,t=Object(n.useState)(),a=Object(s.a)(t,2),c=a[0],r=a[1],l=Object(o.f)(),u=d({initialValues:{author:"",title:""},onSubmit:function(){var t=Object(y.a)(B.a.mark((function t(a){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.previewImage=c,t.next=3,e(a);case 3:l.push("/");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()});return Object(x.jsx)(E,Object(i.a)(Object(i.a)({},u),{},{titlePage:"Create",uploadFile:function(e){var t=e.target.files;t&&T(t[0],r)}}))},W=function(){return Object(x.jsx)("div",{children:"NotFound"})},J=function(e){var t=e.book,a=e.editMethod,c=Object(o.f)(),r=Object(n.useState)(),l=Object(s.a)(r,2),u=l[0],j=l[1],b=d({initialValues:{author:t.author,title:t.title,previewImage:t.previewImage},onSubmit:function(){var e=Object(y.a)(B.a.mark((function e(n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.previewImage=u||n.previewImage,e.next=3,a(n,t._id);case 3:c.push("/");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(x.jsx)(E,Object(i.a)(Object(i.a)({},b),{},{titlePage:"Edit",buttonText:"Edit",uploadFile:function(e){var t=e.target.files;t&&T(t[0],j)}}))},D=function(){var e=j(),t=e.updateBook,a=e.findBookById,c=Object(o.h)(),r=Object(n.useState)((function(){return a(c.bookId)})),i=Object(s.a)(r,1)[0];return i?Object(x.jsx)(J,{book:i,editMethod:t}):Object(x.jsx)(W,{})},A=a(13),H=a.n(A),K=function(e){var t=e.className,a=e.onClick;return Object(x.jsxs)("svg",{onClick:function(){a&&a()},className:t,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[Object(x.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(x.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})]})},P=function(){var e=Object(o.g)(),t=Object(n.useRef)(null),a=Object(o.f)(),c=function(){null!==t.current&&a.push("/?search=".concat(t.current.value))};return Object(x.jsx)("div",{className:H.a.wrapper,children:Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:H.a.navbar,children:[Object(x.jsx)("div",{className:H.a.link,children:Object(x.jsx)(h.b,{tabIndex:1,to:"/",className:m()(Object(b.a)({},H.a.active,"/"===e.pathname)),children:"Home"})}),Object(x.jsx)("div",{className:H.a.link,children:Object(x.jsx)(h.b,{tabIndex:2,to:"/create",className:m()(Object(b.a)({},H.a.active,"/create"===e.pathname)),children:"Create"})}),Object(x.jsxs)("div",{className:H.a.searchWrapper,children:[Object(x.jsx)(K,{onClick:function(){return c()},className:H.a.search}),Object(x.jsx)("input",{ref:t,type:"text",placeholder:"Search",tabIndex:3,onKeyDown:function(e){"Space"!==e.code&&"Enter"!==e.code||c()}})]})]})})})},R=function(){return Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)(P,{}),Object(x.jsxs)(o.c,{children:[Object(x.jsx)(o.a,{exact:!0,component:N,path:"/"}),Object(x.jsx)(o.a,{component:V,path:"/create"}),Object(x.jsx)(o.a,{component:D,path:"/edit/:bookId"}),Object(x.jsx)(o.a,{exact:!0,component:W,path:"*"})]})]})};r.a.render(Object(x.jsx)(h.a,{children:Object(x.jsx)(R,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.ab99a2b0.chunk.js.map